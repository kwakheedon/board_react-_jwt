package com.example.board.domain.comment;

import org.springframework.http.ResponseEntity;
import org.springframework.security.core.annotation.AuthenticationPrincipal;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.example.board.domain.comment.dto.CommentReq;
import com.example.board.exception.ApiResponse;
import com.example.board.security.jwt.CustomUserDetails;

import lombok.RequiredArgsConstructor;

@RestController
@RequestMapping("/api")
@RequiredArgsConstructor
public class CommentController {
	private final CommentService commentService;
	
	///댓글생성
	@PostMapping("/comments") 
    public ResponseEntity<ApiResponse<Void>> createComment( 
            @AuthenticationPrincipal CustomUserDetails userDetails,
            @RequestBody CommentReq req) {
        //서비스 메소드에 필요한 파라미터를 모두 전달
        commentService.createComment(req, userDetails.getMember().getEmail());

        return ResponseEntity.ok(ApiResponse.success("댓글 작성 성공", null));
    }
}

