package com.example.board.domain.member;

import org.springframework.stereotype.Service;

import com.example.board.domain.member.dto.SignUpReq;
import com.example.board.exception.CustomException;
import com.example.board.exception.ErrorCode;

import jakarta.transaction.Transactional;
import lombok.RequiredArgsConstructor;


@Service
@RequiredArgsConstructor
public class MemberService {
	private final MemberRepository memberRepository;
	
	@Transactional
	public void signup(SignUpReq request ) {
		if (memberRepository.existsByEmail(request.getEmail())) {
			throw new CustomException(ErrorCode.USER_ALREADY_EXISTS, "이미 사용 중인 이메일입니다.");
		}
		
		Member member = request.toEntity(passwordEncoder);
		memberRepository.save(member);
	}

}
